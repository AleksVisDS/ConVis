var cdbox;function ClassDetailBox(a,b){this.maindiv=a;this.boxdiv=a.append("div").attr("class","classdetailbox");this.classId=b;this.name=getClassById(b).name;this.tp=function(){return getClassById(b).tp};this.falsePos=function(){getClassById(b).colSum-getClassById(b).tp};this.falseNeg=function(){getClassById(b).rowSum-getClassById(b).tp};this.rowSum=function(){getClassById(b).rowSum};this.colSum=function(){getClassById(b).colSum};this.precision=function(){toPercent(getClassById(b).precision())+"%"};this.recall=function(){toPercent(getClassById(b).recall())+"%"};this.classAccuracy=function(){toPercent(getClassById(b).accuracy())+"%"};this.toptable=null;this.bottomleftbox=null;this.bottomrightbox=null;this.bottomlefttable=null;this.bottomrighttable=null}function initClassDetailBox(d,e){cdbox=new ClassDetailBox(d,e);var c=cdbox.boxdiv;c.style("width","100%").style("font-size","80%").style("color","black");var b=c.append("div").style("background-color","#ddd");cdbox.toptable=b.append("table").attr("class","classdetailboxtoptable").style("width","100%");var a=c.append("div").style("width","100%").style("height","100%").style("text-align","right");cdbox.bottomleftbox=a.append("div").attr("class","falsepositivestable").style("float","left").style("display","block").style("overflow-x","auto").style("width","50%");cdbox.bottomrightbox=a.append("div").attr("class","falsenegativestable").style("float","right").style("display","block").style("overflow-x","auto").style("width","50%");cdbox.bottomlefttable=cdbox.bottomleftbox.append("table").style("width","100%").style("box-shadow","inset 0px 0px 1px black").style("background-color","rgba(255,255,255,0.6)");cdbox.bottomrighttable=cdbox.bottomrightbox.append("table").style("width","100%").style("box-shadow","inset 0px 0px 1px black").style("background-color","rgba(255,255,255,0.6)");updateClassDetailBox(0)}function updateClassDetailBox(a){if(a!=null){cdbox.classId=a}updateClassDetailBoxContent();updateClassFalsePositives();updateClassFalseNegatives()}function updateClassDetailBoxContent(){var b=cdbox.classId;var a=cdbox.toptable;a.selectAll("tr").remove();addDataRow(a,"Sequence number",b,"seqnumber");addDataRow(a,"Label",getClassById(b).name);addDataRow(a,"Precision",toPercent(getClassById(b).precision())+"%","precision");addDataRow(a,"Recall",toPercent(getClassById(b).recall())+"%","recall");addDataRow(a,"Class accuracy",toPercent(getClassById(b).accuracy())+"%","classaccuracy");addDataRow(a,"Samples",getClassById(b).rowSum,"actualoccur");addDataRow(a,"Predictions",getClassById(b).colSum,"predictions");addDataRow(a,"True positives",getClassById(b).tp,"tp");addDataRow(a,"False positives",getClassById(b).colSum-getClassById(b).tp,"fp");addDataRow(a,"False negatives",getClassById(b).rowSum-getClassById(b).tp,"fn")}function updateClassFalsePositives(){var d=cdbox.classId;var b=cdbox.bottomlefttable;b.selectAll("tr").remove();var e=b.append("tr").append("td").attr("colspan","2").style("font-weight","bold").style("text-align","center").text("FP").style("color","#444").style("background-color","#f99").style("box-shadow","inset 0px 0px 2px black");addHelpButton(e,"fplist");var c=[];if(matrix.at(d,d)!=matrix.colSums[d]&&matrix.colSums[d]!=0){for(var a=0;a<matrix.dimension;a++){if(a!=d&&matrix.at(a,d)!=0){c.push({name:matrix.classNames[a],value:matrix.at(a,d)})}}}c.sort(function(f,g){return g.value-f.value});for(var a=0;a<c.length;a++){addDataRow(b,c[a].name,c[a].value)}}function updateClassFalseNegatives(){var d=cdbox.classId;var b=cdbox.bottomrighttable;b.selectAll("tr").remove();var e=b.append("tr").append("td").attr("colspan","2").style("font-weight","bold").style("text-align","center").text("FN").style("color","#444").style("background-color","#99f").style("box-shadow","inset 0px 0px 2px black");addHelpButton(e,"fnlist");var c=[];if(matrix.at(d,d)!=matrix.rowSums[d]&&matrix.rowSums[d]!=0){for(var a=0;a<matrix.dimension;a++){if(a!=d&&matrix.at(d,a)!=0){c.push({name:matrix.classNames[a],value:matrix.at(d,a)})}}}c.sort(function(f,g){return g.value-f.value});for(var a=0;a<c.length;a++){addDataRow(b,c[a].name,c[a].value)}}function removeClassDetailBox(){};